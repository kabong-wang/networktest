package com.funcaretest.test;

import java.nio.ByteBuffer;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.FutureTask;

import com.funcaretest.domain.ResponseResult;
import com.funcaretest.listener.ResponseListener;
import com.funcaretest.task.HandleResponseTask;
import com.funcaretest.util.CommandUtils;
import com.funcaretest.util.PublicTools;

public class ResponseTest {
	
	public static ResponseListener responseListener = new ResponseListener() {
		
		@Override
		public void onDataResponse(ResponseResult result) {
			System.out.println(result);
		}
	};
	
	public static void main(String[] args) {
		//这里模拟一个数据包 (分成了两个包)
		String packStr1 = "0xFF,0x0B,0x5F,0x03,0x00,0x00,0x03,0x00,0x00,0x00,0xAB,0x03,0x00,0x00,0x00,0x01,0x20,0x02,0x00,0x01,0x01,0x0B,0x31,0x00,0x08,0x00,0x31,0x00,0x08,0x00,0x30,0x00,0x08,0x00,0x30,0x00,0x11,0x00,0x6E,0x00,0x49,0x00,0x44,0x00,0x10,0x00,0x33,0x00,0x08,0x00,0x73,0x00,0x74,0x00,0x72,0x00,0x55,0x00,0x73,0x00,0x65,0x00,0x72,0x00,0x10,0x00,0x32,0x00,0x30,0x00,0x32,0x00,0x08,0x00,0x73,0x00,0x74,0x00,0x72,0x00,0x50,0x00,0x61,0x00,0x73,0x00,0x73,0x00,0x77,0x00,0x6F,0x00,0x72,0x00,0x64,0x00,0x10,0x00,0x32,0x00,0x30,0x00,0x32,0x00,0x08,0x00,0x73,0x00,0x74,0x00,0x72,0x00,0x4E,0x00,0x61,0x00,0x6D,0x00,0x65,0x00,0x10,0x00,0x32,0x00,0x30,0x00,0x32,0x00,0x08,0x00,0x73,0x00,0x74,0x00,0x72,0x00,0x54,0x00,0x65,0x00,0x6C,0x00,0x10,0x00,0x32,0x00,0x30,0x00,0x32,0x00,0x08,0x00,0x73,0x00,0x74,0x00,0x72,0x00,0x43,0x00,0x6F,0x00,0x6D,0x00,0x70,0x00,0x61,0x00,0x6E,0x00,0x79,0x00,0x10,0x00,0x32,0x00,0x30,0x00,0x32,0x00,0x08,0x00,0x73,0x00,0x74,0x00,0x72,0x00,0x41,0x00,0x64,0x00,0x64,0x00,0x72,0x00,0x65,0x00,0x73,0x00,0x73,0x00,0x10,0x00,0x32,0x00,0x30,0x00,0x32,0x00,0x08,0x00,0x73,0x00,0x74,0x00,0x72,0x00,0x45,0x00,0x6D,0x00,0x61,0x00,0x69,0x00,0x6C,0x00,0x10,0x00,0x32,0x00,0x30,0x00,0x32,0x00,0x08,0x00,0x73,0x00,0x74,0x00,0x72,0x00,0x52,0x00,0x65,0x00,0x6D,0x00,0x61,0x00,0x72,0x00,0x6B,0x00,0x10,0x00,0x32,0x00,0x30,0x00,0x32,0x00,0x08,0x00,0x6E,0x00,0x4C,0x00,0x69,0x00,0x6D,0x00,0x69,0x00,0x74,0x00,0x53,0x00,0x75,0x00,0x62,0x00,0x55,0x00,0x73,0x00,0x65,0x00,0x72,0x00,0x10,0x00,0x33,0x00,0x08,0x00,0x6E,0x00,0x4C,0x00,0x69,0x00,0x6D,0x00,0x69,0x00,0x74,0x00,0x43,0x00,0x61,0x00,0x72,0x00,0x10,0x00,0x33,0x00,0x08,0x00,0x6E,0x00,0x4C,0x00,0x69,0x00,0x6D,0x00,0x69,0x00,0x74,0x00,0x43,0x00,0x74,0x00,0x72,0x00,0x6C,0x00,0x54,0x00,0x45,0x00,0x10,0x00,0x33,0x00,0x08,0x00,0x6E,0x00,0x4C,0x00,0x69,0x00,0x6D,0x00,0x69,0x00,0x74,0x00,0x43,0x00,0x6C,0x00,0x69,0x00,0x65,0x00,0x6E,0x00,0x74,0x00,0x53,0x00,0x6F,0x00,0x66,0x00,0x74,0x00,0x10,0x00,0x33,0x00,0x08,0x00,0x73,0x00,0x74,0x00,0x72,0x00,0x4F,0x00,0x70,0x00,0x65,0x00,0x6E,0x00,0x49,0x00,0x44,0x00,0x10,0x00,0x32,0x00,0x30,0x00,0x32,0x00,0x08,0x00,0x6E,0x00,0x54,0x00,0x69,0x00,0x6D,0x00,0x65,0x00,0x6F,0x00,0x75,0x00,0x74,0x00,0x10,0x00,0x33,0x00,0x08,0x00,0x6E,0x00,0x43,0x00,0x72,0x00,0x65,0x00,0x61,0x00,0x74,0x00,0x65,0x00,0x54,0x00,0x69,0x00,0x6D,0x00,0x65,0x00,0x10,0x00,0x33,0x00,0x08,0x00,0x6E,0x00,0x4C,0x00,0x69,0x00,0x66,0x00,0x65,0x00,0x6C,0x00,0x6F,0x00,0x6E,0x00,0x67,0x00,0x43,0x00,0x61,0x00,0x72,0x00,0x64,0x00,0x10,0x00,0x33,0x00,0x08,0x00,0x6E,0x00,0x59,0x00,0x65,0x00,0x61,0x00,0x72,0x00,0x43,0x00,";
		String packStr2 = "0x61,0x00,0x72,0x00,0x64,0x00,0x10,0x00,0x33,0x00,0x08,0x00,0x6E,0x00,0x4D,0x00,0x6F,0x00,0x6E,0x00,0x74,0x00,0x68,0x00,0x43,0x00,0x61,0x00,0x72,0x00,0x64,0x00,0x10,0x00,0x33,0x00,0x08,0x00,0x6E,0x00,0x4E,0x00,0x75,0x00,0x6D,0x00,0x62,0x00,0x65,0x00,0x72,0x00,0x43,0x00,0x61,0x00,0x72,0x00,0x64,0x00,0x10,0x00,0x33,0x00,0x08,0x00,0x6E,0x00,0x44,0x00,0x69,0x00,0x73,0x00,0x61,0x00,0x62,0x00,0x6C,0x00,0x65,0x00,0x41,0x00,0x6C,0x00,0x61,0x00,0x72,0x00,0x6D,0x00,0x10,0x00,0x33,0x00,0x08,0x00,0x6E,0x00,0x43,0x00,0x6F,0x00,0x6E,0x00,0x66,0x00,0x69,0x00,0x67,0x00,0x10,0x00,0x33,0x00,0x08,0x00,0x6E,0x00,0x53,0x00,0x65,0x00,0x72,0x00,0x76,0x00,0x65,0x00,0x72,0x00,0x54,0x00,0x69,0x00,0x6D,0x00,0x65,0x00,0x10,0x00,0x33,0x00,0x1B,0x00,0x36,0x00,0x37,0x00,0x31,0x00,0x08,0x00,0x31,0x00,0x35,0x00,0x39,0x00,0x37,0x00,0x32,0x00,0x37,0x00,0x34,0x00,0x31,0x00,0x32,0x00,0x37,0x00,0x31,0x00,0x08,0x00,0x31,0x00,0x32,0x00,0x33,0x00,0x34,0x00,0x35,0x00,0x36,0x00,0x08,0x00,0x8B,0x73,0x66,0x4E,0x59,0x4F,0x08,0x00,0x31,0x00,0x35,0x00,0x39,0x00,0x37,0x00,0x32,0x00,0x37,0x00,0x34,0x00,0x31,0x00,0x32,0x00,0x37,0x00,0x31,0x00,0x08,0x00,0x30,0x00,0x08,0x00,0x08,0x00,0x32,0x00,0x33,0x00,0x33,0x00,0x40,0x00,0x71,0x00,0x71,0x00,0x2E,0x00,0x63,0x00,0x6F,0x00,0x6D,0x00,0x08,0x00,0x08,0x00,0x30,0x00,0x08,0x00,0x30,0x00,0x08,0x00,0x30,0x00,0x08,0x00,0x30,0x00,0x08,0x00,0x08,0x00,0x32,0x00,0x31,0x00,0x31,0x00,0x31,0x00,0x30,0x00,0x33,0x00,0x37,0x00,0x31,0x00,0x31,0x00,0x37,0x00,0x08,0x00,0x31,0x00,0x34,0x00,0x37,0x00,0x39,0x00,0x38,0x00,0x38,0x00,0x35,0x00,0x31,0x00,0x31,0x00,0x38,0x00,0x08,0x00,0x30,0x00,0x08,0x00,0x30,0x00,0x08,0x00,0x30,0x00,0x08,0x00,0x30,0x00,0x08,0x00,0x30,0x00,0x08,0x00,0x30,0x00,0x08,0x00,0x31,0x00,0x34,0x00,0x39,0x00,0x30,0x00,0x36,0x00,0x38,0x00,0x39,0x00,0x36,0x00,0x33,0x00,0x35,0x00,0x00,0x00";
		
		String packStr = packStr1+packStr2;
		String[] packParams = packStr.split(",");

		
		byte[] params = PublicTools.byteStrParamsToBytes(packParams);
		ByteBuffer response = PublicTools.byteToByteBuffer(params);
		ResponseResult responseResult = CommandUtils.decodeResponse(response);
		
//		ExecutorService executor = Executors.newFixedThreadPool(10);
//		HandleResponseTask responseTask = new HandleResponseTask(responseListener, responseResult);
//		executor.execute(responseTask);
		
		HandleResponseTask responseTask = new HandleResponseTask(responseListener, responseResult);
		new Thread(responseTask).start();
	}
	
	

}
